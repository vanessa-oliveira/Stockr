<div class="content">
  <p-button label="Adicionar cliente" (click)="openCustomerForm()"/>
  <app-customer-form [(visible)]="visible" [customer]="selectedCustomer" (customerChanged)="loadCustomers()"></app-customer-form>
  <div class="list">
    <p-table [value]="customers" [tableStyle]="{ 'min-width': '50rem' }">
      <ng-template #header>
        <tr>
          <th>Nome</th>
          <th>Email</th>
          <th>Telefone</th>
          <th>CPF/CNPJ</th>
          <th>Ações</th>
        </tr>
      </ng-template>
      <ng-template #body let-customer>
        <tr>
          <td>{{ customer.name }}</td>
          <td>{{ customer.email }}</td>
          <td>{{ customer.phone | mask: '(00) 00000-0000' }}</td>
          <td>
            @if (customer.cpf) {
              <span>{{ customer.cpf | mask: '000.000.000-00' }}</span>
            }
            @if (customer.cnpj) {
              <span>{{ customer.cnpj | mask: '00.000.000/0000-00' }}</span>
            }
          </td>
          <td class="actions" style="display: flex; gap: 8px;">
            <i class="pi pi-pencil" style="cursor: pointer;" (click)="editCustomer(customer)"></i>
            <i class="pi pi-trash" style="cursor: pointer;" (click)="deleteCustomer(customer)"></i>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>
  <p-confirmDialog></p-confirmDialog>
</div>